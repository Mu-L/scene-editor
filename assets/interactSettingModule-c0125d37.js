import{n as c,ae as v,ax as i,V as d,U as l}from"./index-b54f5418.js";import"./three-dc46505d.js";const b={name:"BasicEvent",desp:"基础事件",children:[{name:"openWindow",desp:"打开新窗口",params:[{label:"链接地址",key:"url",component:"de-controller-input",props:{}}]},{name:"visibleObject",desp:"显示物体",params:[{label:"目标物体",key:"target",component:"de-controller-select",props:{options:"objects"}},{label:"显示",key:"visible",component:"de-controller-switch",props:{}},{label:"延迟时长",key:"delay",component:"de-controller-number",props:{step:1,displayAccuracy:0,min:0}}]},{name:"changeScene",desp:"切换场景",params:[{label:"场景",key:"scene",component:"de-controller-select",props:{options:"scenes"}},{label:"延迟时长",key:"delay",component:"de-controller-number",props:{step:1,displayAccuracy:0,min:0}}]},{name:"changeCamera",desp:"切换相机",params:[{label:"相机",key:"camera",component:"de-controller-select",props:{options:"cameras"}},{label:"延迟时长",key:"delay",component:"de-controller-number",props:{step:1,displayAccuracy:0,min:0}}]},{name:"switchAnimate",desp:"动画控制",params:[{label:"目标动画",key:"target",component:"de-controller-select",props:{options:"animations"}},{label:"切换",key:"toggle",component:"de-controller-select",props:{options:[{label:"开",value:"on"},{label:"关",value:"off"},{label:"自动",value:"auto"}]}},{label:"延迟时长",key:"delay",component:"de-controller-number",props:{step:1,displayAccuracy:0,min:0}}]}]},y={name:"RealAnimate",desp:"实时动画",children:[{name:"moveSpacing",desp:"移动距离",params:[{label:"目标物体",key:"target",component:"de-controller-select",props:{options:"objects"}},{label:"距离",key:"spacing",component:"de-controller-vector3",props:{step:1,displayAccuracy:2}},{label:"动画时长",key:"duration",component:"de-controller-number",props:{step:1,displayAccuracy:0,min:0}},{label:"延迟时长",key:"delay",component:"de-controller-number",props:{step:1,displayAccuracy:0,min:0}},{label:"动画曲线",key:"timingFunction",component:"de-controller-select",props:{options:"timingFunction"}}]},{name:"moveTo",desp:"移动到",params:[{label:"目标物体",key:"target",component:"de-controller-select",props:{options:"objects"}},{label:"位置",key:"position",component:"de-controller-vector3",props:{step:1,displayAccuracy:2}},{label:"动画时长",key:"duration",component:"de-controller-number",props:{step:1,displayAccuracy:0,min:0}},{label:"延迟时长",key:"delay",component:"de-controller-number",props:{step:1,displayAccuracy:0,min:0}},{label:"动画曲线",key:"timingFunction",component:"de-controller-select",props:{options:"timingFunction"}}]},{name:"rotationTo",desp:"旋转到",params:[{label:"目标物体",key:"target",component:"de-controller-select",props:{options:"objects"}},{label:"旋转",key:"rotation",component:"de-controller-vector3",props:{step:1,displayAccuracy:2,unit:"°"}},{label:"动画时长",key:"duration",component:"de-controller-number",props:{step:1,displayAccuracy:0,min:0}},{label:"延迟时长",key:"delay",component:"de-controller-number",props:{step:1,displayAccuracy:0,min:0}},{label:"动画曲线",key:"timingFunction",component:"de-controller-select",props:{options:"timingFunction"}}]},{name:"upTo",desp:"正向到",params:[{label:"目标物体",key:"target",component:"de-controller-select",props:{options:"objects"}},{label:"正向",key:"up",component:"de-controller-vector3",props:{step:1,displayAccuracy:2}},{label:"动画时长",key:"duration",component:"de-controller-number",props:{step:1,displayAccuracy:0,min:0}},{label:"延迟时长",key:"delay",component:"de-controller-number",props:{step:1,displayAccuracy:0,min:0}},{label:"动画曲线",key:"timingFunction",component:"de-controller-select",props:{options:"timingFunction"}}]},{name:"moveToObject",desp:"移动到物体",params:[{label:"物体",key:"target",component:"de-controller-select",props:{options:"objects"}},{label:"目标物体",key:"to",component:"de-controller-select",props:{options:"objects"}},{label:"偏移",key:"offset",component:"de-controller-vector3",props:{step:1,displayAccuracy:2}},{label:"动画时长",key:"duration",component:"de-controller-number",props:{step:1,displayAccuracy:0,min:0}},{label:"延迟时长",key:"delay",component:"de-controller-number",props:{step:1,displayAccuracy:0,min:0}},{label:"动画曲线",key:"timingFunction",component:"de-controller-select",props:{options:"timingFunction"}}]},{name:"moveFromTo",desp:"从起始移动到结束位置",params:[{label:"目标物体",key:"target",component:"de-controller-select",props:{options:"objects"}},{label:"起始",key:"from",component:"de-controller-vector3",props:{step:1,displayAccuracy:2}},{label:"结束",key:"to",component:"de-controller-vector3",props:{step:1,displayAccuracy:2}},{label:"动画时长",key:"duration",component:"de-controller-number",props:{step:1,displayAccuracy:0,min:0}},{label:"延迟时长",key:"delay",component:"de-controller-number",props:{step:1,displayAccuracy:0,min:0}},{label:"动画曲线",key:"timingFunction",component:"de-controller-select",props:{options:"timingFunction"}}]},{name:"focusObject",desp:"聚焦物体",params:[{label:"目标物体",key:"target",component:"de-controller-select",props:{options:"objects"}},{label:"指定相机（可选）",key:"camera",component:"de-controller-select",props:{options:"cameras"}},{label:"坐标空间",key:"space",component:"de-controller-select",props:{options:[{label:"本地",value:"local"},{label:"世界",value:"world"}]}},{label:"偏移量",key:"offset",component:"de-controller-vector3",props:{step:1,displayAccuracy:2}},{label:"是否返回",key:"back",component:"de-controller-switch",props:{}},{label:"动画时长",key:"duration",component:"de-controller-number",props:{step:1,displayAccuracy:0,min:0}},{label:"延迟时长",key:"delay",component:"de-controller-number",props:{step:1,displayAccuracy:0,min:0}},{label:"动画曲线",key:"timingFunction",component:"de-controller-select",props:{options:"timingFunction"}}]},{name:"showToCamera",desp:"展示到相机",params:[{label:"目标物体",key:"target",component:"de-controller-select",props:{options:"objects"}},{label:"偏移量",key:"offset",component:"de-controller-vector3",props:{step:1,displayAccuracy:2}},{label:"动画时长",key:"duration",component:"de-controller-number",props:{step:1,displayAccuracy:0,min:0}},{label:"延迟时长",key:"delay",component:"de-controller-number",props:{step:1,displayAccuracy:0,min:0}},{label:"动画曲线",key:"timingFunction",component:"de-controller-select",props:{options:"timingFunction"}}]},{name:"fadeObject",desp:"淡入淡出物体",params:[{label:"目标物体",key:"target",component:"de-controller-select",props:{options:"objects"}},{label:"方向",key:"direction",component:"de-controller-select",props:{options:[{label:"淡入",value:"in"},{label:"淡出",value:"out"}]}},{label:"动画时长",key:"duration",component:"de-controller-number",props:{step:1,displayAccuracy:0,min:0}},{label:"延迟时长",key:"delay",component:"de-controller-number",props:{step:1,displayAccuracy:0,min:0}},{label:"动画曲线",key:"timingFunction",component:"de-controller-select",props:{options:"timingFunction"}},{label:"影响显示",key:"visible",component:"de-controller-switch",props:{}}]},{name:"colorChange",desp:"材质变色",params:[{label:"目标物体",key:"target",component:"de-controller-select",props:{options:"materials"}},{label:"属性",key:"attribute",component:"de-controller-select",props:{options:[{label:"颜色",value:"color"},{label:"发光",value:"emssive"}]}},{label:"目标颜色",key:"color",component:"de-controller-picker",props:{}},{label:"动画时长",key:"duration",component:"de-controller-number",props:{step:1,displayAccuracy:0,min:0}},{label:"延迟时长",key:"delay",component:"de-controller-number",props:{step:1,displayAccuracy:0,min:0}},{label:"动画曲线",key:"timingFunction",component:"de-controller-select",props:{options:"timingFunction"}}]},{name:"orbitTargetMove",desp:"轨道目标移动",params:[{label:"目标物体（可选）",key:"target",component:"de-controller-select",props:{options:"objects"}},{label:"偏移量",key:"offset",component:"de-controller-vector3",props:{step:1,displayAccuracy:2}},{label:"动画时长",key:"duration",component:"de-controller-number",props:{step:1,displayAccuracy:0,min:0}},{label:"延迟时长",key:"delay",component:"de-controller-number",props:{step:1,displayAccuracy:0,min:0}},{label:"动画曲线",key:"timingFunction",component:"de-controller-select",props:{options:"timingFunction"}}]}]},s=[b,y],g=()=>{const e=s.filter(t=>t.name!=="empty"),n={};return e.forEach(t=>{t.children&&t.children.length&&t.children.forEach(o=>{n[o.name]={label:o.desp,params:o.params}})}),n},h=g();var f=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"eventControllers-container"},[t("de-collapse-layout",{attrs:{label:e.controllerConfigure.label,"show-icon":!1}},e._l(e.controllerConfigure.params,function(o,r){return t(o.component,e._b({key:r,tag:"component",attrs:{slot:"container",keyframe:!1,label:o.label},slot:"container",model:{value:e.eventConfigure.params[o.key],callback:function(a){e.$set(e.eventConfigure.params,o.key,a)},expression:"eventConfigure.params[item.key]"}},"component",o.props,!1))}),1),t("div",{staticClass:"operation-box",on:{click:function(o){return e.deleteEvent(e.eventConfigure)}}},[t("i",{staticClass:"el-icon-delete"})])],1)},k=[];const _={props:{eventConfigure:{type:Object,required:!0}},data(){return{}},computed:{controllerConfigure(){const e=JSON.parse(JSON.stringify(h[this.eventConfigure.name]));return e.params.forEach(n=>{n.props&&n.props.options&&this[n.props.options]&&(n.props.options=this[n.props.options])}),e},objects(){const e=Object.keys(v).map(t=>this.$store.getters[`${t}/get`]),n=[];for(const t of e)for(const o of Object.values(t))n.push({label:o.name,value:o.vid});return n},materials(){return Object.values(this.$store.getters["material/get"]).map(e=>({label:e.name,value:e.vid}))},scenes(){return Object.values(this.$store.getters["scene/get"]).map(e=>({label:e.name,value:e.vid}))},cameras(){return Object.values(this.$store.getters["camera/get"]).map(e=>({label:e.name,value:e.vid}))},animations(){return Object.values(this.$store.getters["animation/get"]).map(e=>({label:e.name,value:e.vid}))},animationActions(){return Object.values(this.$store.getters["animationAction/get"]).map(e=>({label:e.name,value:e.vid}))},timingFunction(){return[{label:"线性运动",value:i.EASING_LINEAR_NONE},{label:"二次缓进缓出",value:i.EASING_QUADRATIC_INOUT}]}},created(){},methods:{deleteEvent(e){this.$emit("deleteEvent",e)}}},p={};var j=c(_,f,k,!1,A,"8351545e",null,null);function A(e){for(let n in p)this[n]=p[n]}const E=function(){return j.exports}();var C=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"eventGroup-container"},[t("div",{staticClass:"eventGroup-header"},[t("span",{staticClass:"header-tips"},[t("i",{staticClass:"el-icon-position"}),t("span",{domProps:{textContent:e._s(e.label)}})]),t("div",{staticClass:"eventGroup-operation"},[t("i",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"复制事件",expression:"'复制事件'",modifiers:{top:!0}}],staticClass:"el-icon-document-copy",on:{click:e.copyEvent}}),t("i",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"粘贴事件",expression:"'粘贴事件'",modifiers:{top:!0}}],staticClass:"el-icon-document-checked",on:{click:e.passEvent}}),t("el-dropdown",{attrs:{trigger:"hover"}},[t("i",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"添加事件",expression:"'添加事件'",modifiers:{top:!0}}],staticClass:"el-icon-circle-plus"}),t("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[t("el-dropdown-item",[t("el-cascader-panel",{attrs:{options:e.configures,props:{expandTrigger:"hover",label:"desp",value:"name"}},on:{change:e.change},model:{value:e.cascaderValue,callback:function(o){e.cascaderValue=o},expression:"cascaderValue"}})],1)],1)],1)],1)]),t("div",{staticClass:"eventGroup-eventConfig"},e._l(e.activeObject[e.eventName],function(o,r){return t("event-controllers",{key:r,attrs:{"event-configure":o},on:{deleteEvent:function(a){return e.deleteEvent(r)}}})}),1)])},$=[];const w={components:{eventControllers:E},props:{label:{type:String,default:"鼠标点击"},eventName:{type:String,required:!0}},data(){return{configures:s,cascaderValue:["empty","empty"]}},computed:{activeObject(){return this.$store.getters["active/object"]}},methods:{change(e){if(console.log(e),e[0]==="empty")return;if(e.length<2){console.error("value length illeage.");return}const n=d.observable(l.generateConfig(e[1]));console.log(n),console.log(this.activeObject[this.eventName]),this.activeObject[this.eventName].push(n),this.cascaderValue=[]},deleteEvent(e){this.$confirm(`是否删除此事件: ${this.eventName}-${e}?`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{console.log(this.eventName,e),this.activeObject[this.eventName].splice(e,1),console.log(this.activeObject),this.$message({type:"success",message:"删除成功!"})})},copyEvent(){this.$store.commit("clipBoard/copyEvent",this.activeObject[this.eventName]),this.$message.success("复制成功！")},passEvent(){const e=this.$store.getters["clipBoard/event"];if(!e||!e.length){this.$message.warning("未复制事件。");return}this.activeObject[this.eventName].push(...e),this.$message.success("粘贴成功！")}}},m={};var O=c(w,C,$,!1,x,"b401b6dc",null,null);function x(e){for(let n in m)this[n]=m[n]}const F=function(){return O.exports}();var N=function(){var e=this,n=e.$createElement,t=e._self._c||n;return e.activeObject.vid?t("div",{staticClass:"interactSettingModule-container"},[t("div",{staticClass:"eventSetting-title"},[t("vis-icon",{attrs:{code:"#iconjihetuxing"}}),t("de-controller-input",{attrs:{label:"名称"},model:{value:e.activeObject.name,callback:function(o){e.$set(e.activeObject,"name",o)},expression:"activeObject.name"}})],1),e._l(e.activeEventList,function(o){return t("event-group",{key:o.name,attrs:{label:o.label,"event-name":o.name}})}),t("el-popover",{attrs:{placement:"bottom",width:"400",trigger:"click"},model:{value:e.eventVisible,callback:function(o){e.eventVisible=o},expression:"eventVisible"}},[t("div",{staticClass:"event-current",on:{click:function(o){e.showEvent=!0}}},[t("span",[e._v("当前事件：")]),t("span",{domProps:{textContent:e._s(e.currentEvent.label)}}),t("vis-icon",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"编辑事件",expression:"'编辑事件'"}],attrs:{code:"#iconbianji"}})],1),t("el-collapse-transition",[t("div",{directives:[{name:"show",rawName:"v-show",value:e.showEvent,expression:"showEvent"}],staticClass:"event-box"},e._l(e.eventList,function(o){return t("div",{key:o.name,staticClass:"event-item",on:{click:function(r){return e.addEvent(o)}}},[t("vis-icon",{attrs:{code:o.icon}}),t("span",{domProps:{textContent:e._s(o.label)}})],1)}),0)]),t("el-cascader-panel",{directives:[{name:"show",rawName:"v-show",value:!e.showEvent,expression:"!showEvent"}],attrs:{options:e.configures,props:{expandTrigger:"hover",label:"desp",value:"name"}},on:{change:e.change},model:{value:e.cascaderValue,callback:function(o){e.cascaderValue=o},expression:"cascaderValue"}}),t("el-button",{attrs:{slot:"reference",type:"primary",size:"mini"},slot:"reference"},[e._v(" 添加交互 ")])],1)],2):e._e()},V=[];const T={components:{eventGroup:F},data(){return{showEvent:!0,currentEvent:"",configures:s,cascaderValue:[],eventVisible:!1,eventList:[{icon:"#iconjiaohu",name:"pointerdown",label:"鼠标按下"},{icon:"#iconjiaohu",name:"pointerup",label:"鼠标抬起"},{icon:"#iconjiaohu",name:"pointermove",label:"鼠标移动"},{icon:"#iconjiaohu",name:"pointerenter",label:"鼠标进入"},{icon:"#iconjiaohu",name:"pointerleave",label:"鼠标移出"},{icon:"#iconjiaohu",name:"click",label:"鼠标点击"},{icon:"#iconjiaohu",name:"dblclick",label:"鼠标双击"},{icon:"#iconjiaohu",name:"contextmenu",label:"鼠标右键"}]}},computed:{activeObject(){return this.$store.getters["active/object"]},activeEventList(){return this.eventList.filter(e=>this.activeObject[e.name].length)}},methods:{addEvent(e){this.currentEvent=e,this.showEvent=!1},change(e){if(console.log(e),e[0]==="empty")return;if(e.length<2){console.error("value length illeage.");return}const n=this.currentEvent.name;window.EventGeneratorManager=l;const t=d.observable(l.generateConfig(e[1]));this.activeObject[n].push(t),this.cascaderValue=[],this.currentEvent="",this.showEvent=!0,this.eventVisible=!1}}},u={};var S=c(T,N,V,!1,G,"40f51156",null,null);function G(e){for(let n in u)this[n]=u[n]}const L=function(){return S.exports}();export{L as default};
