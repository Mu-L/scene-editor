(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5f41c158"],{"0a3a":function(t,e,a){},1148:function(t,e,a){"use strict";var i=a("a691"),r=a("1d80");t.exports="".repeat||function(t){var e=String(r(this)),a="",n=i(t);if(n<0||n==1/0)throw RangeError("Wrong number of repetitions");for(;n>0;(n>>>=1)&&(e+=e))1&n&&(a+=e);return a}},"194e":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"material-container"},[a("div",{staticClass:"element-box material-list-box"},[a("div",{staticClass:"box-title",on:{click:function(e){return t.toggleBox("list")}}},[a("mmd-icon",{class:{"icon-open":t.boxController.list},attrs:{code:"#icon-arrow-right"}}),a("mmd-icon",{attrs:{code:"#icon-caizhi-"}}),a("span",[t._v("材质列表")])],1),a("el-collapse-transition",[a("div",{directives:[{name:"show",rawName:"v-show",value:t.boxController.list,expression:"boxController.list"}],staticClass:"box-main"},[a("material-list")],1)])],1),a("div",{staticClass:"element-box material-preview-box"},[a("div",{staticClass:"box-title",on:{click:function(e){return t.toggleBox("preview")}}},[a("mmd-icon",{class:{"icon-open":t.boxController.preview},attrs:{code:"#icon-arrow-right"}}),a("mmd-icon",{attrs:{code:"#icon-yulan"}}),a("span",[t._v("材质预览")])],1),a("el-collapse-transition",[a("div",{directives:[{name:"show",rawName:"v-show",value:t.boxController.preview,expression:"boxController.preview"}],staticClass:"box-main"},[a("preview-material")],1)])],1),a("div",{staticClass:"element-box material-setting-box"},[a("div",{staticClass:"box-title",on:{click:function(e){return t.toggleBox("setting")}}},[a("mmd-icon",{class:{"icon-open":t.boxController.setting},attrs:{code:"#icon-arrow-right"}}),a("mmd-icon",{attrs:{code:"#icon-shezhi"}}),a("span",[t._v("材质设置")])],1),a("el-collapse-transition",[a("div",{directives:[{name:"show",rawName:"v-show",value:t.boxController.setting,expression:"boxController.setting"}],staticClass:"box-main"},[a("material-config")],1)])],1)])},r=[],n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"materialList-container",on:{dblclick:t.addMaterial}},["{}"===JSON.stringify(t.materialList)?a("div",{staticClass:"materialList-tips"},[a("span",[t._v("双击新增材质")])]):t._e(),t._l(t.materialList,(function(e,i){return a("div",{key:i,staticClass:"material-item",on:{mousedown:function(a){return t.setDrag(e.id)},click:function(a){return a.stopPropagation(),t.chouseMaterial(e.id)}}},[a("div",{ref:"thumbnail"+i,refInFor:!0,staticClass:"material-thumbnail",class:{"material-thumbnail-chouse":t.currentMaterial.id===e.id}}),a("div",{staticClass:"material-title",domProps:{textContent:t._s(e.name)}})])}))],2)},s=[],o=(a("4160"),a("38cf"),a("159b"),a("d4ec")),l=a("bee2"),c=a("ade3"),u=(new THREE.TextureLoader).load("".concat("https://shiotsukikaedesari.gitee.io/mmddisplaydevice/","image/backgroundFloor.png"),(function(t){h.childrenList.forEach((function(t){t.update()}))}));u.wrapS=THREE.RepeatWrapping,u.wrapT=THREE.RepeatWrapping,u.repeat.set(1,1);var h=function(){function t(e,a){Object(o["a"])(this,t),this.id=a,this.dom=e,this._name="材质".concat(this.id),this._color="rgb(255, 255, 255)",this.renderer=new THREE.WebGLRenderer({antialias:!0}),this.scene=new THREE.Scene,this.ambientLight=new THREE.AmbientLight("rgb(255, 255, 255)",.7),this.pointLight=new THREE.PointLight("rgb(255, 255, 255)",.5,200,1),this.camera=new THREE.PerspectiveCamera(45,this.dom.clientWidth/this.dom.clientHeight,1,100),this.mesh=new THREE.Mesh(new THREE.SphereBufferGeometry(10,32,32),new THREE.MeshStandardMaterial({color:this._color})),this.backgroundPlane=new THREE.Mesh(new THREE.PlaneBufferGeometry(100,100),new THREE.MeshStandardMaterial({map:t.floorTexture})),this.floorPlane=new THREE.Mesh(new THREE.PlaneBufferGeometry(100,100),new THREE.MeshStandardMaterial({map:t.floorTexture})),this.init(),t.childrenList.push(this),0===this.id&&(t.previewMaterial=this)}return Object(l["a"])(t,[{key:"init",value:function(){this.renderer.setSize(this.dom.clientWidth,this.dom.clientHeight),this.renderer.shadowMap.enabled=!0,this.renderer.shadowMap.type=THREE.PCFSoftShadowMap,this.dom.appendChild(this.renderer.domElement),this.renderer.setClearColor("rgb(125, 125, 125)"),this.backgroundPlane.position.set(0,0,-20),this.floorPlane.position.set(0,-10,0),this.floorPlane.rotation.x=-90*Math.PI/180,this.pointLight.position.set(-30,5,20),this.pointLight.castShadow=!0,this.mesh.castShadow=!0,this.mesh.receiveShadow=!0,this.backgroundPlane.castShadow=!0,this.backgroundPlane.receiveShadow=!0,this.floorPlane.castShadow=!0,this.floorPlane.receiveShadow=!0,this.scene.add(this.ambientLight),this.scene.add(this.pointLight),this.scene.add(this.camera),this.scene.add(this.mesh),this.scene.add(this.backgroundPlane),this.scene.add(this.floorPlane),this.camera.position.x=0,this.camera.position.y=0,this.camera.position.z=40,this.camera.up.x=0,this.camera.up.y=1,this.camera.up.z=0,this.camera.lookAt(new THREE.Vector3(0,0,0)),this.update()}},{key:"update",value:function(){this.renderer.render(this.scene,this.camera)}},{key:"name",get:function(){return this._name},set:function(t){this._name=t}},{key:"type",get:function(){return this.mesh.material.type},set:function(t){}},{key:"color",get:function(){return this._color},set:function(e){this._color=e,this.mesh.material.color=new THREE.Color(e),this.update(),t.previewMaterial.update()}},{key:"transparent",get:function(){return this.mesh.material.transparent},set:function(e){this.mesh.material.transparent=e,this.update(),t.previewMaterial.update()}},{key:"opacity",get:function(){return this.mesh.material.opacity},set:function(e){this.mesh.material.opacity=e,this.update(),t.previewMaterial.update()}}]),t}();Object(c["a"])(h,"floorTexture",u),Object(c["a"])(h,"childrenList",[]),Object(c["a"])(h,"previewMaterial","");var d=h,m={data:function(){return{materialId:1}},computed:{materialList:function(){return this.$store.getters.getMaterialList},currentMaterial:function(){return this.$store.getters.getCurrentMaterial}},methods:{addMaterial:function(){var t=this,e=this.materialId;this.materialId+=1,this.$store.commit("addMaterial",e),this.$nextTick((function(){t.$store.commit("renderDom",{id:e,material:new d(t.$refs["thumbnail".concat(e)][0],e)})}))},chouseMaterial:function(t){this.$store.commit("setCurrentMaterial",t),this.$store.commit("setIsDrag",!1)},setDrag:function(t){this.chouseMaterial(t),this.$store.commit("setIsDrag",!0)}}},p=m,f=(a("5edd"),a("2877")),v=Object(f["a"])(p,n,s,!1,null,"3f428a0c",null),b=v.exports,M=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{ref:"previewMaterial",staticClass:"previewMaterial-container"})},g=[],w={data:function(){return{previewMaterial:""}},watch:{"$store.getters.getCurrentMaterial":function(t,e){this.previewMaterial.mesh.material=t.mesh.material,this.previewMaterial.update()}},mounted:function(){this.previewMaterial=new d(this.$refs.previewMaterial,0)}},x=w,C=(a("8641"),Object(f["a"])(x,M,g,!1,null,"478d68ca",null)),E=C.exports,y=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"materialConfig-container"},[t.currentMaterial?a("div",{staticClass:"materialConfig-box"},[a("MMD-input",{attrs:{title:"材质命名"},model:{value:t.currentMaterial.name,callback:function(e){t.$set(t.currentMaterial,"name",e)},expression:"currentMaterial.name"}}),a("MMD-select",{attrs:{title:"材质类型",options:t.materialTypeList},model:{value:t.currentMaterial.type,callback:function(e){t.$set(t.currentMaterial,"type",e)},expression:"currentMaterial.type"}}),a("MMD-switch",{attrs:{title:"材质透明"},model:{value:t.currentMaterial.transparent,callback:function(e){t.$set(t.currentMaterial,"transparent",e)},expression:"currentMaterial.transparent"}}),a("MMD-slider",{attrs:{title:"透明程度",min:0,max:1,step:.01},model:{value:t.currentMaterial.opacity,callback:function(e){t.$set(t.currentMaterial,"opacity",e)},expression:"currentMaterial.opacity"}}),a("div",{staticClass:"materialConfig-config"},[a(t.currentMaterial.type,{tag:"component"})],1)],1):a("div",{staticClass:"materialConfig-tips"},[a("span",[t._v("请选择材质")])])])},k=[],T=(a("d3b7"),function(){return a.e("chunk-2f7802e9").then(a.bind(null,"07d5"))}),L={components:{MeshStandardMaterial:T},data:function(){return{materialTypeList:[{label:"MeshStandardMaterial",value:"MeshStandardMaterial"},{label:"MeshPhongMaterial",value:"MeshPhongMaterial"},{label:"MeshNormalMaterial",value:"MeshNormalMaterial"},{label:"MeshLambertMaterial",value:"MeshLambertMaterial"}]}},computed:{currentMaterial:function(){return this.$store.state.rightNav.currentMaterial}}},R=L,P=(a("d670"),Object(f["a"])(R,y,k,!1,null,"35acaa5d",null)),_=P.exports,H={components:{materialList:b,previewMaterial:E,materialConfig:_},data:function(){return{boxController:{list:!0,preview:!0,setting:!0},materialList:[]}},methods:{toggleBox:function(t){for(var e in this.boxController)if(e===t){this.boxController[e]=!this.boxController[e];break}}}},S=H,$=(a("3ab2"),Object(f["a"])(S,i,r,!1,null,"268ee29a",null));e["default"]=$.exports},"38cf":function(t,e,a){var i=a("23e7"),r=a("1148");i({target:"String",proto:!0},{repeat:r})},"3ab2":function(t,e,a){"use strict";var i=a("dc01"),r=a.n(i);r.a},"5c28":function(t,e,a){},"5edd":function(t,e,a){"use strict";var i=a("738d"),r=a.n(i);r.a},"738d":function(t,e,a){},8641:function(t,e,a){"use strict";var i=a("0a3a"),r=a.n(i);r.a},ade3:function(t,e,a){"use strict";function i(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}a.d(e,"a",(function(){return i}))},bee2:function(t,e,a){"use strict";function i(t,e){for(var a=0;a<e.length;a++){var i=e[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function r(t,e,a){return e&&i(t.prototype,e),a&&i(t,a),t}a.d(e,"a",(function(){return r}))},d4ec:function(t,e,a){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}a.d(e,"a",(function(){return i}))},d670:function(t,e,a){"use strict";var i=a("5c28"),r=a.n(i);r.a},dc01:function(t,e,a){}}]);