import{n as a}from"./texture-e454a176.js";import"./three-679cdae3.js";var c=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"containerOperation-container"},[s("div",{directives:[{name:"show",rawName:"v-show",value:e.loading,expression:"loading"}],staticClass:"loading-mask"},[s("vis-icon",{staticClass:"ani",attrs:{code:"#iconxuanzhuan"}}),s("span",[e._v("正在加载...")])],1),!e.loading&&!e.floderChildren.length?s("div",{staticClass:"empty-tips"},[s("span",[e._v("这里暂时是空的哦")])]):e._l(e.floderChildren,function(r,o){return s("div",{directives:[{name:"tooltip",rawName:"v-tooltip.bottom",value:`${r.name}`,expression:"`${item.name}`",modifiers:{bottom:!0}}],key:o,staticClass:"file-item-box",on:{click:function(i){return e.chouseFile(r)}}},[r.dir?[s("vis-icon",{attrs:{size:e.iconSize,code:"#iconwenjianjia"}})]:[s("img",{attrs:{src:e.getUrl(r)}}),s("div",{directives:[{name:"show",rawName:"v-show",value:e.selected.find(function(i){return i.id===r.id}),expression:"selected.find((elem) => elem.id === item.id)"}],staticClass:"item-selected-mask",on:{click:function(i){return i.stopPropagation(),e.cancelSelected(r)}}},[s("vis-icon",{staticClass:"item-selected",attrs:{size:"60px",code:"#icongou"}})],1)],s("span",{staticClass:"item-title",domProps:{textContent:e._s(r.name)}}),s("vis-icon",{directives:[{name:"tooltip",rawName:"v-tooltip.bottom",value:"删除",expression:"`删除`",modifiers:{bottom:!0}}],staticClass:"item-delete",attrs:{size:"16px",code:"#iconshanchu"},nativeOn:{click:function(i){return i.stopPropagation(),e.remove(r)}}})],2)}),s("div",{staticClass:"file-item-placeholder",style:{display:e.floderChildren.length%2!==0?"block":"none",flex:1}})],2)},l=[];const d={data(){return{iconSize:"35px",timer:"",fileIcon:{mtl:"#iconmtl"},selected:[]}},computed:{loading(){return this.$store.getters["textureLibrary/loading"]},currentFloder(){return this.$store.getters["textureLibrary/currentFloder"]},floderChildren(){return this.currentFloder.children},currentScene(){return this.$store.getters["scene/currentScene"]},urls(){return this.$store.getters.urls}},methods:{getUrl(e){let t=this.urls[`texture-${e.id}`];return t||(t=URL.createObjectURL(e.texture),this.$store.commit("cacheUrl",{module:"texture",file:e,url:t})),t},chouseFile(e){e.dir?this.$store.commit("textureLibrary/currentFloder",e):this.selected.push(e)},cancelSelected(e){this.selected.some((t,s,r)=>{if(e.id===t.id)return this.selected.splice(s,1),!0})},remove(e){e.dir?this.$confirm(`是否删除此分类: ${e.name}?`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this.axios.post("/model/removeClassify",{id:e.id}).then(t=>{t.status===200?(this.$message({type:"success",message:"删除成功!"}),this.$store.commit("textureLibrary/removeChildren",e)):this.$message.error(t.message)})}):this.$confirm(`是否删除此模型: ${e.name}, 删除此模型相关的编辑项目会受到影响，是否继续?`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this.axios.post("/model/removeModel",{id:e.id}).then(t=>{t.status===200?(this.$message({type:"success",message:"删除成功!"}),this.$store.commit("textureLibrary/removeChildren",e)):this.$message.error(t.message)})})}}},n={};var u=a(d,c,l,!1,m,"a36ad804",null,null);function m(e){for(let t in n)this[t]=n[t]}const v=function(){return u.exports}();export{v as default};
