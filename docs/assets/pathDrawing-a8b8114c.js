import{n as p,e as n,V as c}from"./index-63b3abee.js";import"./three-2ccf5448.js";const e={line:a=>({curve:"line",params:[a.point.x,a.point.y,a.point.x,a.point.y]}),arc:a=>({curve:"arc",params:[a.point.x,a.point.y,10,!1,a.point.x,a.point.y]}),bezier:a=>({curve:"bezier",params:[a.point.x,a.point.y,a.point.x+5,a.point.y+5,a.point.x+5,a.point.y-5,a.point.x,a.point.y]}),quadratic:a=>({curve:"quadratic",params:[a.point.x,a.point.y,a.point.x+5,a.point.y+5,a.point.x,a.point.y]})},l={line:(a,t)=>{t.params[t.params.length-2]=a.point.x,t.params[t.params.length-1]=a.point.y},arc:(a,t)=>{t.params[t.params.length-2]=a.point.x,t.params[t.params.length-1]=a.point.y},bezier:(a,t)=>{const r=t.params.length;t.params[r-6]=t.params[0]+5,t.params[r-5]=t.params[1]+5,t.params[r-4]=a.point.x+5,t.params[r-3]=a.point.y-5,t.params[r-2]=a.point.x,t.params[r-1]=a.point.y},quadratic:(a,t)=>{const r=t.params.length;t.params[r-4]=(a.point.x+t.params[0])/2,t.params[r-3]=(a.point.y+t.params[1])/2,t.params[r-2]=a.point.x,t.params[r-1]=a.point.y}};var h=function(){var a=this,t=a.$createElement,r=a._self._c||t;return r("div",{staticClass:"pathDrawing-container"},[a._l(a.curveList,function(i){return r("div",{directives:[{name:"tooltip",rawName:"v-tooltip",value:i.label,expression:"item.label"}],key:i.name,staticClass:"path-line-box",class:{"active-box":a.drawPen===i.name},on:{click:function(s){return a.$store.commit("path/drawPen",i.name)}}},[r("vis-icon",{attrs:{code:i.icon}})],1)}),r("div",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"退出绘制",expression:"'退出绘制'"}],staticClass:"exist-path-box",on:{click:function(i){return a.$store.commit("path/draw",{status:!1,geometry:""})}}},[r("vis-icon",{attrs:{code:"#iconredo"}})],1)],2)},m=[];const d={data(){return{curveList:[{icon:"#iconzhexian",name:"line",label:"直线"},{icon:"#iconyuanhu",name:"arc",label:"圆弧"},{icon:"#iconercibeisaier",name:"quadratic",label:"二次贝塞尔"},{icon:"#iconsancibeisaier",name:"bezier",label:"三次贝塞尔"}],count:0}},computed:{draw(){return this.$store.getters["path/draw"]},drawPen(){return this.$store.getters["path/drawPen"]},drawGeometry(){return this.$store.getters["path/drawGeometry"]},drawPath(){return this.$store.getters["path/drawPath"]}},watch:{draw:{handler(a){const t=n.pathSketcher;a&&(n.selectionDisable=!0,t.addEventListener("write",r=>{this.drawPath.curves.push(c.observable(e[this.drawPen](r))),this.count+=1,this.drawGeometry.divisions=this.count*100}),t.addEventListener("move",r=>{const i=this.drawPath.curves[this.drawPath.curves.length-1];if(i.curve!==this.drawPen){this.drawPath.curves.pop();const s=e[this.drawPen](r);s.params[0]=i.params[0],s.params[1]=i.params[1],this.drawPath.curves.push(s)}l[this.drawPen](r,this.drawPath.curves[this.drawPath.curves.length-1])}),t.addEventListener("end",r=>{this.drawPath.curves.pop(),n.selectionDisable=!1}))},immediate:!0}}},o={};var u=p(d,h,m,!1,w,"7d8b14d3",null,null);function w(a){for(let t in o)this[t]=o[t]}const y=function(){return u.exports}();export{y as default};
