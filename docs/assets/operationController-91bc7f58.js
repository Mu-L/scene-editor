import{n as p,e as c,V as v,g as u,A as m,C as d}from"./index-9c012ccb.js";import{a as h}from"./aniScriptLibrary-75c9e81e.js";import"./three-6daa312a.js";var g=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"operationController-container"},[e("div",{staticClass:"operationGeneral-container"},[e("div",{staticClass:"operationGeneral-search"},[e("el-input",{attrs:{size:"mini",placeholder:"搜索","prefix-icon":"el-icon-search"},model:{value:t.searchValue,callback:function(i){t.searchValue=i},expression:"searchValue"}})],1),e("div",{staticClass:"operationGeneral-time"},[e("span",[t._v(t._s(t.clipCurrentTime+"/"+t.totalTime))])]),e("div",{staticClass:"operationGeneral-control"},[e("vis-icon",{staticStyle:{transform:"rotate(180deg)"},attrs:{code:"#iconkuaijin"},nativeOn:{click:function(i){return(function(){t.$store.commit("animation/lastFrame")}).apply(null,arguments)}}}),e("vis-icon",{attrs:{title:"播放",code:t.play?"#iconzantingtingzhi":"#iconbofang"},nativeOn:{click:function(i){return t.togglePlay.apply(null,arguments)}}}),e("vis-icon",{attrs:{code:"#iconkuaijin"},nativeOn:{click:function(i){return(function(){t.$store.commit("animation/nextFrame")}).apply(null,arguments)}}})],1)]),e("div",{staticClass:"operationMain-container"},[e("div",{staticClass:"operationMain-title-box"},[e("div",{staticClass:"operation-helper"},[e("vis-icon",{attrs:{code:"#iconkejian",title:"可见"}}),e("vis-icon",{attrs:{code:"#iconlock",title:"操作"}}),e("vis-icon",{attrs:{code:"#iconyuanxing",title:"独奏"}}),e("vis-icon",{attrs:{code:"#iconshengyin",title:"声音"}})],1),e("div",{staticClass:"operation-name"},[e("vis-icon",{attrs:{code:"#iconbiaoqian"}}),e("span",[t._v("名称")])],1)]),e("div",{ref:"item-box",staticClass:"operationMain-item-box",on:{scroll:t.scroll}},t._l(t.animationMap,function(i,n){return e("div",{key:n,staticClass:"operationMain-item",class:{"operationMain-item-chouse":i.chouse},on:{click:function(o){return t.chouseObject(i)}}},[e("div",{staticClass:"item-rootObject"},[e("div",{staticClass:"item-helper"},[e("div",{staticClass:"item-helper-checkBox"},[e("vis-icon",{directives:[{name:"show",rawName:"v-show",value:i.visible,expression:"item.visible"}],attrs:{code:"#iconkejian",title:"可见"}})],1),e("div",{staticClass:"item-helper-checkBox"},[e("vis-icon",{directives:[{name:"show",rawName:"v-show",value:i.lock,expression:"item.lock"}],attrs:{code:"#iconlock",title:"操作"}})],1),e("div",{staticClass:"item-helper-checkBox"},[e("vis-icon",{directives:[{name:"show",rawName:"v-show",value:i.solo,expression:"item.solo"}],attrs:{code:"#iconyuanxing",title:"独奏"}})],1),e("div",{staticClass:"item-helper-checkBox"},[e("vis-icon",{directives:[{name:"show",rawName:"v-show",value:i.voice,expression:"item.voice"}],attrs:{code:"#iconshengyin",title:"声音"}})],1)]),e("div",{staticClass:"item-open-sign",on:{click:function(o){return t.triggleItem(i)}}},[e("vis-icon",{class:{"sign-active":i.open},staticStyle:{transform:"scale(0.7)"},attrs:{code:"#iconsanjiaojiantouyou"}})],1),e("div",{staticClass:"item-name"},[e("span",{domProps:{textContent:t._s(t.getObjectName(n))}})])]),t._l(t.keyframeTrack[n],function(o,r){return e("div",{directives:[{name:"show",rawName:"v-show",value:i.open,expression:"item.open"}],key:r,staticClass:"item-track"},[e("span",{staticClass:"track-title",domProps:{textContent:t._s(o.name)}}),e("el-select",{attrs:{placeholder:"选择脚本",size:"mini"},on:{change:function(s){return t.change({vid:n,attribute:r,scirpt:o.script.name,item:o})}},model:{value:o.script.name,callback:function(s){t.$set(o.script,"name",s)},expression:"trackItem.script.name"}},t._l(t.aniScriptOptions,function(s){return e("el-option",{key:s.value,attrs:{label:s.label,value:s.value}})}),1)],1)})],2)}),0)])])},f=[];const C={data(){return{searchValue:"",clipCurrentTime:"00:00:00",aniScriptOptions:[]}},computed:{animationMap(){return this.$store.getters["animation/map"]},keyframeTrack(){return this.$store.getters["keyframeTrack/get"]},totalTime(){const t=this.$store.getters["animation/totalDuration"];let a="";if(t>=60){const e=Math.floor(t/60);a+=e>=10?e:`0${e}`,a+=":";const i=t-e*60;a+=i>=10?i:`0${i}`,a+=":00"}else a=`00:${t}:00`;return a},play(){return this.$store.getters["animation/play"]}},methods:{triggleItem(t){t.open=!t.open},togglePlay(){this.$store.commit("animation/play",!this.play)},scroll(t){this.$emit("scrollHandler",t.target.scrollTop)},getObjectName(t){return c.getConfigBySymbol(t).name},chouseObject(){},change({vid:t,attribute:a,scirpt:e,item:i}){if(i.script.name){const n=v.observable(u(d.SCRIPTANIMATION,{target:t,attribute:`.${a}`,script:m.generateConfig(e)}));c.applyConfig(n),i.script.vid=n.vid}}},created(){this.aniScriptOptions=Object.values(h).map(t=>({label:t.desp,value:t.name})),this.aniScriptOptions.unshift({label:"选择脚本",value:""})}},l={};var _=p(C,g,f,!1,y,"59c51661",null,null);function y(t){for(let a in l)this[a]=l[a]}const $=function(){return _.exports}();export{$ as default};
