import{e as a}from"./index-2b47d9b6.js";import{n as d,ai as c,a9 as m,V as h}from"./index-2dfd5781.js";import"./three-c85558b8.js";var u=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"containerOperation-container"},[o("div",{directives:[{name:"show",rawName:"v-show",value:e.loading,expression:"loading"}],staticClass:"loading-mask"},[o("vis-icon",{staticClass:"ani",attrs:{code:"#iconxuanzhuan"}}),o("span",[e._v("正在加载...")])],1),!e.loading&&!e.floderChildren.length?o("div",{staticClass:"empty-tips"},[o("span",[e._v("这里暂时是空的哦")])]):e._l(e.floderChildren,function(i,r){return o("div",{directives:[{name:"tooltip",rawName:"v-tooltip.bottom",value:`${i.name}`,expression:"`${item.name}`",modifiers:{bottom:!0}}],key:r,staticClass:"file-item-box",class:{active:!1},on:{click:function(n){return e.chouseFile(i)}}},[i.dir?[o("vis-icon",{attrs:{size:e.iconSize,code:"#iconwenjianjia"}})]:[o("img",{attrs:{src:i.preview}})],o("span",{staticClass:"item-title",domProps:{textContent:e._s(i.name)}}),o("vis-icon",{directives:[{name:"tooltip",rawName:"v-tooltip.bottom",value:"删除",expression:"`删除`",modifiers:{bottom:!0}}],staticClass:"item-delete",attrs:{size:"16px",code:"#iconshanchu"},nativeOn:{click:function(n){return n.stopPropagation(),e.remove(i)}}})],2)}),o("div",{staticClass:"file-item-placeholder",style:{display:e.floderChildren.length%2!==0?"block":"none",flex:1}})],2)},f=[];const p={data(){return{iconSize:"35px",timer:"",fileIcon:{mtl:"#iconmtl"},configTemplateCache:{},configRootCache:{}}},computed:{loading(){return this.$store.getters["modelLibrary/loading"]},currentFloder(){return this.$store.getters["modelLibrary/currentFloder"]},floderChildren(){return this.currentFloder.children},currentScene(){return this.$store.getters["scene/currentScene"]},urls(){return this.$store.getters.urls}},methods:{chouseFile(e){e.dir?this.$store.commit("modelLibrary/currentFloder",e):this.modelSelected(e)},modelSelected(e){let t=this.urls[`model-${e.id}`];if(t||(t=URL.createObjectURL(e.model),this.$store.commit("cacheUrl",{module:"model",file:e,url:t})),!this.configTemplateCache[t])a.loadResourcesAsync([{url:t,ext:e.ext}]).then(o=>{this.configTemplateCache[t]=o.resourceConfig[t];const i=[t,t+".scene"];for(const r of i)if(o.configMap.has(r)){const n=o.configMap.get(r);n.name=e.name,this.configRootCache[t]=n.vid;break}if(!this.configTemplateCache[t]){this.$message.error("加载模型失败！");return}if(!this.configRootCache[t]){this.$message.error("获取模型根元素失败！");return}this.modelSelected(e)});else{const o=this.configTemplateCache[t],{config:i,detail:r}=c.clone(o,{detail:!0,fillName:!0}),n=c.handler(i,s=>m(s.type,s));a.loadConfigAsync(h.observable(n)).then(s=>{this.configRootCache[t]&&(this.$store.commit("notifyAll"),this.$nextTick(()=>{this.currentScene.children.push(r[this.configRootCache[t]])}))})}},remove(e){return this.$tool.devTips()}}},l={};var v=d(p,u,f,!1,g,"699ef295",null,null);function g(e){for(let t in l)this[t]=l[t]}const x=function(){return v.exports}();export{x as default};
