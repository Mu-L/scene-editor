import{ag as m,a9 as c,V as p,af as v,n as b,i as s,ay as E}from"./texture-7d506f8b.js";import{o as C}from"./objectCollapse-e4ca0d9d.js";import{h as g,e as r}from"./index-74278c3c.js";import"./three-c85558b8.js";class d extends m{constructor({geometryConfig:e,meshConfig:t,helperConfig:n,store:o,engine:l}){super(),this.geometryConfig=e,this.meshConfig=t,this.helperConfig=n,this.$store=o,this.engine=l}next(){const e=c(this.geometryConfig.type,this.geometryConfig),t=c(this.meshConfig.type,this.meshConfig),n=c(this.helperConfig.type,this.helperConfig);this.$store.commit("geometry/add",e),this.$store.commit("mesh/add",t),this.$store.getters["scene/currentScene"].children.push(this.meshConfig.vid),this.$store.commit("helper/add",n)}prev(){const e=this.$store.getters["scene/currentScene"];e.children.splice(e.children.indexOf(this.meshConfig.vid),1),this.$store.commit("helper/remove",this.helperConfig.vid),this.$store.commit("mesh/remove",this.meshConfig.vid),this.$store.commit("geometry/remove",this.geometryConfig.vid)}}class u extends m{constructor({engine:e,store:t,line:n,geometry:o}){super(),this.$store=t,this.engine=e,this.line=n,this.geometry=o}next(){const e=p.observable(this.geometry),t=p.observable(this.line);this.engine.applyConfig(e,t),this.$store.getters["scene/currentScene"].children.push(t.vid),this.$store.commit("line/notify")}prev(){const e=this.line,t=this.$store.getters["scene/currentScene"];t.children.splice(t.children.indexOf(e.vid),1),this.engine.removeConfigBySymbol(this.line.vid,this.geometry.vid)}}class y extends m{constructor({config:e,store:t,engine:n}){super(),this.config=v.clone(e),this.$store=t,this.engine=n}next(){this.$store.commit("css3D/add",c(this.config.type,this.config)),this.$store.getters["scene/currentScene"].children.push(this.config.vid)}prev(){const e=this.$store.getters["scene/currentScene"];e.children.splice(e.children.indexOf(this.config.vid),1),this.$store.commit("css3D/remove",this.config.vid)}}class S extends m{constructor({config:e,store:t,engine:n}){super(),this.config=v.clone(e),this.$store=t,this.engine=n}next(){this.$store.commit("css2D/add",c(this.config.type,this.config)),this.$store.getters["scene/currentScene"].children.push(this.config.vid)}prev(){const e=this.$store.getters["scene/currentScene"];e.children.splice(e.children.indexOf(this.config.vid),1),this.$store.commit("css2D/remove",this.config.vid)}}class T extends m{constructor({sprite:e,material:t,store:n,engine:o}){super(),this.sprite=e,this.material=t,this.$store=n,this.engine=o}next(){const e=c(this.sprite.type,this.sprite),t=c(this.material.type,this.material);this.$store.commit("material/add",t),this.$store.commit("sprite/add",e),this.$store.getters["scene/currentScene"].children.push(this.sprite.vid)}prev(){const e=this.$store.getters["scene/currentScene"];e.children.splice(e.children.indexOf(this.sprite.vid),1),this.$store.commit("sprite/remove",this.sprite.vid)}}class O extends m{constructor({config:e,store:t,engine:n,module:o}){super(),this.config=e,this.$store=t,this.engine=n,this.module=o}next(){this.$store.commit(`${this.module}/add`,this.config),this.$store.getters["scene/currentScene"].children.push(this.config.vid)}prev(){const e=this.$store.getters["scene/currentScene"];e.children.splice(e.children.indexOf(this.config.vid),1),this.$store.commit(`${this.module}/remove`,this.config.vid)}}class j extends m{constructor({materialConfig:e,pointsConfig:t,store:n,engine:o}){super(),this.materialConfig=e,this.pointsConfig=t,this.$store=n,this.engine=o}next(){const e=c(this.materialConfig.type,this.materialConfig),t=c(this.pointsConfig.type,this.pointsConfig);this.$store.commit("material/add",e),this.$store.commit("points/add",t),this.$store.getters["scene/currentScene"].children.push(this.pointsConfig.vid)}prev(){const e=this.$store.getters["scene/currentScene"];e.children.splice(e.children.indexOf(this.pointsConfig.vid),1),this.$store.commit("points/remove",this.pointsConfig.vid),this.$store.commit("material/remove",this.materialConfig.vid)}}var w=function(){var i=this,e=i.$createElement,t=i._self._c||e;return t("div",{staticClass:"basicElement-container"},i._l(i.list,function(n,o){return t("object-collapse",{key:o,attrs:{"data-list":n.list,"click-hanlder":n.click,icon:n.icon,label:n.label}})}),1)},A=[];const R={components:{objectCollapse:C},data(){return{list:[{icon:"#iconpingmianjihe",label:"参数物体",list:[{icon:"#iconlifangti",label:"立方体",geometry:s.BOXGEOMETRY},{icon:"#iconqiuti",label:"球体",geometry:s.SPHEREGEOMETRY},{icon:"#iconzhuiti",label:"锥体",geometry:s.CONEGEOMETRY},{icon:"#iconzhuti",label:"柱体",geometry:s.CYLINDERGEOMETRY},{icon:"#iconhuanti",label:"环体",geometry:s.TORUSGEOMETRY},{icon:"#iconjuxing",label:"矩形",geometry:s.PLANEGEOMETRY},{icon:"#iconyuanxing1",label:"圆形",geometry:s.CIRCLEGEOMETRY},{icon:"#iconyuanhuan",label:"圆环",geometry:s.RINGGEOMETRY}],click:function(i){const e=c(i.geometry,void 0,{observer:!1}),t=c(s.MESH,void 0,{observer:!1});t.icon=i.icon,t.name=`${i.label}-${t.vid.slice(-2)}`,t.geometry=e.vid,e.name=`${t.name}的几何`;const n=c(s.OBJECTHELPER,{target:t.vid,shape:!0},{observer:!1});g.apply(new d({geometryConfig:e,meshConfig:t,helperConfig:n,store:this.$store,engine:r}),!0)}},{icon:"#iconpingmianjihe",label:"展示平面",list:[{icon:"#iconjingling",label:"精灵",click:function(i){const e=c(s.SPRITEMATERIAL,{sizeAttenuation:!1},{observer:!1});e.name=`精灵材质-${e.vid.slice(-2)}`;const t=c(s.SPRITE,{material:e.vid,scale:{x:.2,y:.2}},{observer:!1});t.name=`${i.label}-${t.vid.slice(-2)}`,g.apply(new T({engine:r,store:this.$store,material:e,sprite:t}),!0)}},{icon:"#iconC2jingling",label:"C2精灵",click:function(i){const e=c(s.CSS2DPLANE,{width:200,height:200},{observer:!1});e.name=`${i.label}-${e.vid.slice(-2)}`,g.apply(new S({engine:r,store:this.$store,config:e}),!0)}},{icon:"#iconC3pingmian",label:"C3平面",click:function(i){const e=c(s.CSS3DPLANE,{width:300,height:300,scale:{x:.1,y:.1,z:.1}},{observer:!1});e.name=`${i.label}-${e.vid.slice(-2)}`,g.apply(new y({engine:r,store:this.$store,config:e}),!0)}},{icon:"#iconC3jingling",label:"C3精灵",click:function(i){const e=c(s.CSS3DSPRITE,{width:100,height:100,scale:{x:.2,y:.2,z:.2}},{observer:!1});e.name=`${i.label}-${e.vid.slice(-2)}`,g.apply(new y({engine:r,store:this.$store,config:e}),!0)}}],click:function(i){i.click&&i.click.call(this,i)}},{icon:"#iconpingmianjihe",label:"路径与形状",list:[{icon:"#iconlujing",label:"3D路径",click:function(i){const e=c(s.PATH3,{curves:[]});e.name=`${i.label}-${e.vid.slice(-2)}`,r.applyConfig(e);const t=c(s.PATHGEOMETRY,{path:e.vid,space:!1}),n=c(s.LINE,{geometry:t.vid});n.name=e.name,t.name=`路径几何-${t.vid.slice(-2)}`,r.applyConfig(t,n),this.$store.getters["scene/currentScene"].children.push(n.vid),this.$store.commit("path/notify"),this.$store.commit("line/notify"),this.$store.commit("path/draw",{status:!this.draw,geometry:t,drawType:"3d"})}},{icon:"#iconlujing",label:"2D路径",click:function(i){const e=c(s.PATH,{curves:[]});e.name=`${i.label}-${e.vid.slice(-2)}`,r.applyConfig(e);const t=c(s.PATHGEOMETRY,{path:e.vid,space:!1}),n=c(s.LINE,{geometry:t.vid});n.name=e.name,t.name=`路径几何-${t.vid.slice(-2)}`,r.applyConfig(t,n),this.$store.getters["scene/currentScene"].children.push(n.vid),this.$store.commit("path/notify"),this.$store.commit("line/notify"),this.$store.commit("path/draw",{status:!this.draw,geometry:t,drawType:"2d"})}},{icon:"#iconxingzhuang",label:"形状",click:function(i){const e=c(s.PATH,{curves:[],autoClose:!0});e.name=`路径-${e.vid.slice(-2)}`;const t=c(s.SHAPE,{shape:e.vid});t.name=`${i.label}-${t.vid.slice(-2)}`;const n=c(s.SHAPEGEOMETRY,{shape:t.vid}),o=c(s.MESH,{geometry:n.vid});o.name=t.name,r.applyConfig(e,t,n,o),this.$store.getters["scene/currentScene"].children.push(o.vid),this.$store.commit("shape/notify"),this.$store.commit("mesh/notify"),this.$store.commit("path/draw",{status:!this.draw,geometry:n,drawType:"2d"})}}],click:function(i){i.click&&i.click.call(this,i)}},{icon:"#iconpingmianjihe",label:"应用物体",list:[{icon:"#iconguandao",label:"管道",click:function(i){if(!Object.keys(this.$store.getters["path/get"]).length){this.$message.warning("您还未创建路径。");return}this.$message.info("请选择场景中的一个3D路径。");const e=t=>{const n=r.getConfigBySymbol(t.objectSymbols[0]);if(!n){console.error(`engine can not found object with vid: ${t.objectSymbols[0]}`),this.$message.warning("未知错误，请重新选择。");return}const o=r.getConfigBySymbol(n.geometry);if(!o||o.type!==s.PATHGEOMETRY){this.$message.warning("您选择的不是一个3D路径物体，请重新选择。");return}const l=r.getConfigBySymbol(o.path);if(!l||l.type!==s.PATH3){this.$message.warning("您选择的不是一个3D路径物体，请重新选择。");return}const h=c(s.PATHTUBEGEOMETRY,{path:o.path}),a=c(s.MESH,{geometry:h.vid});a.name=`${i.label}-${a.vid.slice(-2)}`,h.name=`${i.label}-${a.name}`;const f=c(s.OBJECTHELPER,{target:a.vid,shape:!0},{observer:!1});g.apply(new d({geometryConfig:h,meshConfig:a,helperConfig:f,store:this.$store,engine:r}),!0),r.removeEventListener("selected",e)};r.addEventListener("selected",e)}},{icon:"#iconjiyati",label:"挤压体",click:function(i){if(!Object.keys(this.$store.getters["shape/get"]).length){this.$message.warning("您还未创建形状。");return}this.$message.info("请选择场景中的一个形状。");const e=t=>{const n=r.getConfigBySymbol(t.objectSymbols[0]);if(!n){console.error(`engine can not found object with vid: ${t.objectSymbols[0]}`),this.$message.warning("未知错误，请重新选择。");return}const o=r.getConfigBySymbol(n.geometry);if(!o||o.type!==s.SHAPEGEOMETRY){this.$message.warning("您选择的不是一个形状，请重新选择。");return}const l=c(s.EXTRUDEGEOMETRY,{shapes:o.shape,center:!1,options:{steps:128,depth:10}}),h=c(s.MESH,{geometry:l.vid});h.name=`${i.label}-${h.vid.slice(-2)}`,l.name=`${i.label}几何-${l.vid.slice(-2)}`;const a=c(s.OBJECTHELPER,{target:h.vid,shape:!0},{observer:!1});g.apply(new d({geometryConfig:l,meshConfig:h,helperConfig:a,store:this.$store,engine:r}),!0),r.removeEventListener("selected",e)};r.addEventListener("selected",e)}},{icon:"#iconjiyati",label:"车削体",click:function(i){if(!Object.keys(this.$store.getters["path/get"]).length){this.$message.warning("您还未创建路径。");return}this.$message.info("请选择场景中的一个2D路径。");const e=t=>{const n=r.getConfigBySymbol(t.objectSymbols[0]);if(!n){console.error(`engine can not found object with vid: ${t.objectSymbols[0]}`),this.$message.warning("未知错误，请重新选择。");return}const o=r.getConfigBySymbol(n.geometry);if(!o||o.type!==s.PATHGEOMETRY){this.$message.warning("您选择的不是一个2D路径物体，请重新选择。");return}const l=r.getConfigBySymbol(o.path);if(!l||l.type!==s.PATH){this.$message.warning("您选择的不是一个2D路径物体，请重新选择。");return}const h=c(s.LATHEGEOMETRY,{path:o.path,center:!1}),a=c(s.MESH,{geometry:h.vid});a.name=`${i.label}-${a.vid.slice(-2)}`,h.name=`${i.label}-${a.name}`;const f=c(s.OBJECTHELPER,{target:a.vid,shape:!0},{observer:!1});g.apply(new d({geometryConfig:h,meshConfig:a,helperConfig:f,store:this.$store,engine:r}),!0),r.removeEventListener("selected",e)};r.addEventListener("selected",e)}},{icon:"#icondianyun",label:"点云",object:s.POINTS,click:function(i){this.$message.info("请选择场景中的一个几何物体。");const e=t=>{const n=r.getConfigBySymbol(t.objectSymbols[0]);if(!n){console.error(`engine can not found object with vid: ${t.objectSymbols[0]}`);return}const o=c(s.POINTSMATERIAL,void 0,{observer:!1}),l=c(s.POINTS,{material:o.vid,geometry:n.geometry},{observer:!1});l.name=`点云-${l.vid.slice(-2)}`,l.icon=i.icon,o.name=`${l.name}的材质`,g.apply(new j({materialConfig:o,pointsConfig:l,store:this.$store,engine:r}),!0),r.removeEventListener("selected",e)};r.addEventListener("selected",e)}},{icon:"#iconwanggehua",label:"网格",click:function(i){this.$message.info("请选择场景中的一个几何物体。");const e=t=>{const n=r.getConfigBySymbol(t.objectSymbols[0]);if(!n){console.error(`engine can not found object with vid: ${t.objectSymbols[0]}`);return}const o=c(s.EDGESGEOMETRY,{target:n.geometry,thresholdAngle:0},{observer:!1}),l=c(s.LINE,{geometry:o.vid},{observer:!1});l.name=`${i.label}-${l.vid.slice(-2)}`,o.name=`网格几何-${l.name}`,g.apply(new u({engine:r,store:this.$store,line:l,geometry:o}),!0),r.removeEventListener("selected",e)};r.addEventListener("selected",e)}},{icon:"#iconlifangti",label:"描边",click:function(i){this.$message.info("请选择场景中的一个几何物体。");const e=t=>{const n=r.getConfigBySymbol(t.objectSymbols[0]);if(!n){console.error(`engine can not found object with vid: ${t.objectSymbols[0]}`);return}const o=c(s.EDGESGEOMETRY,{target:n.geometry,thresholdAngle:1},{observer:!1}),l=c(s.LINESEGMENTS,{geometry:o.vid},{observer:!1});l.name=`${i.label}-${l.vid.slice(-2)}`,o.name=`描边几何-${l.name}`,g.apply(new u({engine:r,store:this.$store,line:l,geometry:o}),!0),r.removeEventListener("selected",e)};r.addEventListener("selected",e)}}],click:function(i){i.click&&i.click.call(this,i)}},{icon:"#iconpingmianjihe",label:"辅助",list:[{icon:"#iconzu",label:"组",type:s.GROUP},{icon:"#iconkongduixiang",label:"空对象",type:s.OBJECT3D}],click:function(i){const e=c(i.type);e.name=`${i.label}-${e.vid.slice(-2)}`,g.apply(new O({engine:r,store:this.$store,config:e,module:E[i.type]}),!0)}}]}}},$={};var x=b(R,w,A,!1,L,"17a64993",null,null);function L(i){for(let e in $)this[e]=$[e]}const G=function(){return x.exports}();export{G as default};
