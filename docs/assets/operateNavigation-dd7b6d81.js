import{n as r,e as n,a as l}from"./index-9292a4d7.js";import"./three-2ccf5448.js";var c=function(){var e=this,i=e.$createElement,t=e._self._c||i;return t("div",{staticClass:"operateNavigation-container"},[t("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(s){e.screenshotDialogVisible=!0}}},[e._v(" 快照 ")]),t("el-button",{attrs:{size:"mini",type:"success"},on:{click:e.save}},[e._v("保存")]),t("el-dialog",{attrs:{title:"快照设置",visible:e.screenshotDialogVisible,width:"30%",center:""},on:{"update:visible":function(s){e.screenshotDialogVisible=s}}},[t("el-form",{attrs:{"label-position":"left","label-width":"90px"}},[t("el-form-item",{attrs:{label:"文件名"}},[t("el-input",{attrs:{size:"mini"},model:{value:e.screenshotSetting.name,callback:function(s){e.$set(e.screenshotSetting,"name",s)},expression:"screenshotSetting.name"}})],1),t("el-form-item",{attrs:{label:"宽度（px）"}},[t("el-input-number",{attrs:{size:"mini",controls:!1},model:{value:e.screenshotSetting.width,callback:function(s){e.$set(e.screenshotSetting,"width",s)},expression:"screenshotSetting.width"}})],1),t("el-form-item",{attrs:{label:"高度（px）"}},[t("el-input-number",{attrs:{size:"mini",controls:!1},model:{value:e.screenshotSetting.height,callback:function(s){e.$set(e.screenshotSetting,"height",s)},expression:"screenshotSetting.height"}})],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{size:"mini"},on:{click:function(s){e.screenshotDialogVisible=!1}}},[e._v(" 取 消 ")]),t("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.getScreenshot}},[e._v(" 确 定 ")])],1)],1)],1)},h=[];const g={data(){return{screenshotDialogVisible:!1,buildDialogVisible:!1,screenshotSetting:{width:1920,height:1080,name:"vis-screenshot"},exportSetting:{name:"vis-scene"}}},computed:{name(){return this.$store.getters.name},id(){return this.$store.getters.id}},methods:{async getScreenshot(){const e=await n.getScreenshot({width:this.screenshotSetting.width,height:this.screenshotSetting.height}),i=document.createElement("a");i.download=this.screenshotSetting.name,i.href=e,i.click(),this.screenshotDialogVisible=!1,this.screenshotSetting={width:1920,height:1080,name:"vis-screenshot"}},async save(){const e=this.$loading({text:"正在保存...",background:"rgb(0, 0, 0)",target:".renderWindow-container"}),i=n.exportConfig(),t=await this.$store.dispatch("exportConfig"),s=await n.getScreenshot({width:1920,height:1080});l.saveApp({id:this.id,name:this.name,app:i,editor:t,preview:s}).then(a=>{console.log(a),this.$message.success("保存成功！")}).finally(()=>{e.close()})},display(){window.open(`/app/${this.$store.getters.id}/dist`)},download(){const e=document.createElement("a");e.download=`${this.$store.getters.name}.zip`,e.href=`/app/${this.$store.getters.id}/dist.zip`,e.click()}},mounted(){n.keyboardManager.register({shortcutKey:["ctrl","s"],desp:"在线保存",keydown:e=>{e.preventDefault(),e.stopPropagation(),this.save()}})}},o={};var d=r(g,c,h,!1,p,"2826814e",null,null);function p(e){for(let i in o)this[i]=o[i]}const f=function(){return d.exports}();export{f as default};
