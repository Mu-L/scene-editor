import{af as h,a8 as o,V as d,ae as u,n as v,i as s,ax as $}from"./texture-e454a176.js";import{o as y}from"./objectCollapse-b0294a07.js";import{h as a,e as r}from"./index-4d29e0e5.js";import"./three-679cdae3.js";class m extends h{constructor({geometryConfig:e,meshConfig:i,helperConfig:n,store:c,engine:l}){super(),this.geometryConfig=e,this.meshConfig=i,this.helperConfig=n,this.$store=c,this.engine=l}next(){const e=o(this.geometryConfig.type,this.geometryConfig),i=o(this.meshConfig.type,this.meshConfig),n=o(this.helperConfig.type,this.helperConfig);this.$store.commit("geometry/add",e),this.$store.commit("mesh/add",i),this.$store.getters["scene/currentScene"].children.push(this.meshConfig.vid),this.$store.commit("helper/add",n)}prev(){const e=this.$store.getters["scene/currentScene"];e.children.splice(e.children.indexOf(this.meshConfig.vid),1),this.$store.commit("helper/remove",this.helperConfig.vid),this.$store.commit("mesh/remove",this.meshConfig.vid),this.$store.commit("geometry/remove",this.geometryConfig.vid)}}class g extends h{constructor({engine:e,store:i,line:n,geometry:c}){super(),this.$store=i,this.engine=e,this.line=n,this.geometry=c}next(){const e=d.observable(this.geometry),i=d.observable(this.line);this.engine.applyConfig(e,i),this.$store.getters["scene/currentScene"].children.push(i.vid),this.$store.commit("line/notify")}prev(){const e=this.line,i=this.$store.getters["scene/currentScene"];i.children.splice(i.children.indexOf(e.vid),1),this.engine.removeConfigBySymbol(this.line.vid,this.geometry.vid)}}class p extends h{constructor({config:e,store:i,engine:n}){super(),this.config=u.clone(e),this.$store=i,this.engine=n}next(){this.$store.commit("css3D/add",o(this.config.type,this.config)),this.$store.getters["scene/currentScene"].children.push(this.config.vid)}prev(){const e=this.$store.getters["scene/currentScene"];e.children.splice(e.children.indexOf(this.config.vid),1),this.$store.commit("css3D/remove",this.config.vid)}}class b extends h{constructor({config:e,store:i,engine:n}){super(),this.config=u.clone(e),this.$store=i,this.engine=n}next(){this.$store.commit("css2D/add",o(this.config.type,this.config)),this.$store.getters["scene/currentScene"].children.push(this.config.vid)}prev(){const e=this.$store.getters["scene/currentScene"];e.children.splice(e.children.indexOf(this.config.vid),1),this.$store.commit("css2D/remove",this.config.vid)}}class E extends h{constructor({sprite:e,material:i,store:n,engine:c}){super(),this.sprite=e,this.material=i,this.$store=n,this.engine=c}next(){const e=o(this.sprite.type,this.sprite),i=o(this.material.type,this.material);this.$store.commit("material/add",i),this.$store.commit("sprite/add",e),this.$store.getters["scene/currentScene"].children.push(this.sprite.vid)}prev(){const e=this.$store.getters["scene/currentScene"];e.children.splice(e.children.indexOf(this.sprite.vid),1),this.$store.commit("sprite/remove",this.sprite.vid)}}class C extends h{constructor({config:e,store:i,engine:n,module:c}){super(),this.config=e,this.$store=i,this.engine=n,this.module=c}next(){this.$store.commit(`${this.module}/add`,this.config),this.$store.getters["scene/currentScene"].children.push(this.config.vid)}prev(){const e=this.$store.getters["scene/currentScene"];e.children.splice(e.children.indexOf(this.config.vid),1),this.$store.commit(`${this.module}/remove`,this.config.vid)}}class S extends h{constructor({materialConfig:e,pointsConfig:i,store:n,engine:c}){super(),this.materialConfig=e,this.pointsConfig=i,this.$store=n,this.engine=c}next(){const e=o(this.materialConfig.type,this.materialConfig),i=o(this.pointsConfig.type,this.pointsConfig);this.$store.commit("material/add",e),this.$store.commit("points/add",i),this.$store.getters["scene/currentScene"].children.push(this.pointsConfig.vid)}prev(){const e=this.$store.getters["scene/currentScene"];e.children.splice(e.children.indexOf(this.pointsConfig.vid),1),this.$store.commit("points/remove",this.pointsConfig.vid),this.$store.commit("material/remove",this.materialConfig.vid)}}var x=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"basicElement-container"},t._l(t.list,function(n,c){return i("object-collapse",{key:c,attrs:{"data-list":n.list,"click-hanlder":n.click,icon:n.icon,label:n.label}})}),1)},O=[];const T={components:{objectCollapse:y},data(){return{list:[{icon:"#iconpingmianjihe",label:"参数物体",list:[{icon:"#iconlifangti",label:"立方体",geometry:s.BOXGEOMETRY},{icon:"#iconqiuti",label:"球体",geometry:s.SPHEREGEOMETRY},{icon:"#iconzhuiti",label:"锥体",geometry:s.CONEGEOMETRY},{icon:"#iconzhuti",label:"柱体",geometry:s.CYLINDERGEOMETRY},{icon:"#iconhuanti",label:"环体",geometry:s.TORUSGEOMETRY},{icon:"#iconjiyati",label:"挤压体",geometry:s.EXTRUDEGEOMETRY},{icon:"#iconjuxing",label:"矩形",geometry:s.PLANEGEOMETRY},{icon:"#iconyuanxing1",label:"圆形",geometry:s.CIRCLEGEOMETRY},{icon:"#iconyuanhuan",label:"圆环",geometry:s.RINGGEOMETRY}],click:function(t){const e=o(t.geometry,void 0,{observer:!1}),i=o(s.MESH,void 0,{observer:!1});i.icon=t.icon,i.name=`${t.label}-${i.vid.slice(-2)}`,i.geometry=e.vid,e.name=`${i.name}的几何`;const n=o(s.OBJECTHELPER,{target:i.vid,shape:!0},{observer:!1});a.apply(new m({geometryConfig:e,meshConfig:i,helperConfig:n,store:this.$store,engine:VIS.engine}),!0)}},{icon:"#iconpingmianjihe",label:"路径与形状",list:[{icon:"#iconlujing",label:"路径",click:function(t){const e=o(s.PATH,{curves:[]});e.name=`路径-${e.vid.slice(-2)}`,r.applyConfig(e);const i=o(s.PATHGEOMETRY,{path:e.vid,space:!1}),n=o(s.LINE,{geometry:i.vid});n.name=`${t.label}-${n.vid.slice(-2)}`,i.name=`路径几何-${n.name}`,r.applyConfig(i,n),this.$store.getters["scene/currentScene"].children.push(n.vid),this.$store.commit("line/notify"),this.$store.commit("path/draw",{status:!this.draw,geometry:i})}},{icon:"#iconxingzhuang",label:"形状",click:function(t){const e=o(s.SHAPE);e.name=`形状-${e.vid.slice(-2)}`,r.applyConfig(e);const i=o(s.SHAPEGEOMETRY,{shape:e.vid}),n=o(s.MESH,{geometry:i.vid});n.name=`${t.label}-${n.vid.slice(-2)}`,a.apply(new m({geometryConfig:i,meshConfig:n,store:this.$store,engine:r}),!0)}},{icon:"#iconguandao",label:"管道",geometry:s.PATHTUBEGEOMETRY},{icon:"#iconxixian",label:"细线",object:s.LINE},{icon:"#iconcuxian",label:"粗线",object:s.LINE2},{icon:"#icondianyun",label:"点云",object:s.POINTS,click:function(t){const e=o(s.POINTSMATERIAL,void 0,{observer:!1}),i=o(s.POINTS,{material:e.vid},{observer:!1});i.name=`点云-${i.vid.slice(-2)}`,i.icon=t.icon,e.name=`${i.name}的材质`,a.apply(new S({materialConfig:e,pointsConfig:i,store:this.$store,engine:r}),!0)}},{icon:"#iconwanggehua",label:"网格",click:function(t){this.$message.info("请选择场景中的一个几何物体。");const e=i=>{const n=r.getConfigBySymbol(i.objectSymbols[0]);if(!n){console.error(`engine can not found object with vid: ${i.objectSymbols[0]}`);return}const c=o(s.EDGESGEOMETRY,{target:n.geometry,thresholdAngle:0},{observer:!1}),l=o(s.LINE,{geometry:c.vid},{observer:!1});l.name=`${t.label}-${l.vid.slice(-2)}`,c.name=`网格几何-${l.name}`,a.apply(new g({engine:r,store:this.$store,line:l,geometry:c}),!0),r.removeEventListener("selected",e)};r.addEventListener("selected",e)}},{icon:"#iconlifangti",label:"描边",click:function(t){this.$message.info("请选择场景中的一个几何物体。");const e=i=>{const n=r.getConfigBySymbol(i.objectSymbols[0]);if(!n){console.error(`engine can not found object with vid: ${i.objectSymbols[0]}`);return}const c=o(s.EDGESGEOMETRY,{target:n.geometry,thresholdAngle:1},{observer:!1}),l=o(s.LINESEGMENTS,{geometry:c.vid},{observer:!1});l.name=`${t.label}-${l.vid.slice(-2)}`,c.name=`描边几何-${l.name}`,a.apply(new g({engine:r,store:this.$store,line:l,geometry:c}),!0),r.removeEventListener("selected",e)};r.addEventListener("selected",e)}}],click:function(t){t.click&&t.click.call(this,t)}},{icon:"#iconpingmianjihe",label:"平面",list:[{icon:"#iconjingling",label:"精灵",click:function(t){const e=o(s.SPRITEMATERIAL,{sizeAttenuation:!1},{observer:!1});e.name=`精灵材质-${e.vid.slice(-2)}`;const i=o(s.SPRITE,{material:e.vid,scale:{x:.2,y:.2}},{observer:!1});i.name=`${t.label}-${i.vid.slice(-2)}`,a.apply(new E({engine:r,store:this.$store,material:e,sprite:i}),!0)}},{icon:"#iconC2jingling",label:"C2精灵",click:function(t){const e=o(s.CSS2DPLANE,{width:200,height:200},{observer:!1});e.name=`${t.label}-${e.vid.slice(-2)}`,a.apply(new b({engine:r,store:this.$store,config:e}),!0)}},{icon:"#iconC3pingmian",label:"C3平面",click:function(t){const e=o(s.CSS3DPLANE,{width:300,height:300,scale:{x:.2,y:.2,z:.2}},{observer:!1});e.name=`${t.label}-${e.vid.slice(-2)}`,a.apply(new p({engine:r,store:this.$store,config:e}),!0)}},{icon:"#iconC3jingling",label:"C3精灵",click:function(t){const e=o(s.CSS3DSPRITE,{width:100,height:100,scale:{x:.2,y:.2,z:.2}},{observer:!1});e.name=`${t.label}-${e.vid.slice(-2)}`,a.apply(new p({engine:r,store:this.$store,config:e}),!0)}}],click:function(t){t.click&&t.click.call(this,t)}},{icon:"#iconpingmianjihe",label:"辅助",list:[{icon:"#iconzu",label:"组",type:s.GROUP},{icon:"#iconkongduixiang",label:"空对象",type:s.OBJECT3D}],click:function(t){const e=o(t.type);e.name=`${t.label}-${e.vid.slice(-2)}`,a.apply(new C({engine:r,store:this.$store,config:e,module:$[t.type]}),!0)}}]}}},f={};var A=v(T,x,O,!1,R,"4e90610d",null,null);function R(t){for(let e in f)this[e]=f[e]}const G=function(){return A.exports}();export{G as default};
